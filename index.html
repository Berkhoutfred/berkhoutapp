
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Berkhout Ritregistratie</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f2f2f7; margin: 0; padding: 15px; }
        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        h2 { font-size: 18px; margin: 0 0 10px 0; color: #007aff; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 14px; margin-bottom: 10px; }
        .info-label { color: #888; font-weight: bold; }
        
        .rit-rij { display: flex; flex-direction: column; padding: 12px 0; border-bottom: 1px solid #eee; }
        .rit-rij:last-child { border: none; }
        .locatie-naam { font-weight: bold; margin-bottom: 8px; color: #333; }
        
        .input-groep { display: flex; gap: 10px; align-items: center; }
        .tijd-selector { display: flex; align-items: center; background: #f2f2f7; border-radius: 8px; padding: 2px; flex: 1; }
        .t-btn { background: #007aff; color: white; border: none; width: 40px; height: 40px; border-radius: 6px; font-size: 20px; font-weight: bold; }
        .tijd-val { flex: 1; text-align: center; font-weight: bold; font-size: 16px; }
        
        input[type="number"] { width: 100px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; text-align: center; }

        .totaal-sectie { background: #e8f2ff; padding: 15px; border-radius: 10px; margin-top: 10px; border: 1px solid #007aff; }
        .totaal-regel { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .totaal-regel:last-child { margin-bottom: 0; }
        .totaal-waarde { font-size: 18px; font-weight: 800; color: #007aff; }

        .btn-verzend { background: #34c759; color: white; width: 100%; padding: 18px; font-size: 18px; font-weight: bold; border: none; border-radius: 12px; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>Ritgegevens #5835</h2>
        <div class="info-grid">
            <div><span class="info-label">Bus:</span> BZ-TX-98</div>
            <div><span class="info-label">Klant:</span> Gorsselnarren</div>
            <div><span class="info-label">Van:</span> Gorssel</div>
            <div><span class="info-label">Naar:</span> Bocholt</div>
        </div>
    </div>

    <div class="card">
        <h2>Tijden & KM-standen</h2>
        <div id="ritLijst"></div>
        
        <div class="totaal-sectie">
            <div class="totaal-regel">
                <span>Totale diensttijd:</span>
                <span class="totaal-waarde" id="totaalTijd">0u 0m</span>
            </div>
            <div class="totaal-regel">
                <span>Totaal gereden KM:</span>
                <span class="totaal-waarde" id="totaalKm">0 km</span>
            </div>
        </div>
    </div>

    <button class="btn-verzend" onclick="verstuurMail()">VERSTUUR RITDATA</button>

    <script>
        const locaties = [
            "Vertrek garage",
            "Vertrek klant",
            "Aankomst bestemming",
            "Vertrek bestemming",
            "Retour klant",
            "Retour garage"
        ];

        function initApp() {
            let html = "";
            locaties.forEach((loc, index) => {
                // Stelt de initiÃ«le tijden in op basis van de planning in de PDF 
                const startTijden = ["08:00", "08:30", "09:45", "17:00", "18:15", "18:45"];
                html += `
                <div class="rit-rij">
                    <div class="locatie-naam">${loc}</div>
                    <div class="input-groep">
                        <div class="tijd-selector">
                            <button class="t-btn" onclick="pasTijdAan(${index}, -15)">-</button>
                            <div class="tijd-val" id="tijd-${index}">${startTijden[index]}</div>
                            <button class="t-btn" onclick="pasTijdAan(${index}, 15)">+</button>
                        </div>
                        <input type="number" id="km-${index}" placeholder="KM stand" oninput="berekenAlles()">
                    </div>
                </div>`;
            });
            document.getElementById('ritLijst').innerHTML = html;
            berekenAlles();
        }

        function pasTijdAan(id, min) {
            let display = document.getElementById(`tijd-${id}`);
            let t = display.innerText.split(":");
            let d = new Date();
            d.setHours(parseInt(t[0]));
            d.setMinutes(parseInt(t[1]) + min);
            display.innerText = ("0" + d.getHours()).slice(-2) + ":" + ("0" + d.getMinutes()).slice(-2);
            berekenAlles();
        }

        function berekenAlles() {
            // Bereken KM
            let standen = [];
            locaties.forEach((_, index) => {
                let val = document.getElementById(`km-${index}`).value;
                if(val !== "") standen.push(parseInt(val));
            });
            if(standen.length >= 2) {
                document.getElementById('totaalKm').innerText = (Math.max(...standen) - Math.min(...standen)) + " km";
            }

            // Bereken Diensttijd (Eerste tijd vs Laatste tijd)
            let tStart = document.getElementById('tijd-0').innerText.split(":");
            let tEind = document.getElementById('tijd-5').innerText.split(":");
            
            let minStart = (parseInt(tStart[0]) * 60) + parseInt(tStart[1]);
            let minEind = (parseInt(tEind[0]) * 60) + parseInt(tEind[1]);
            
            let verschil = minEind - minStart;
            if(verschil < 0) verschil += 1440; // Voor ritten na middernacht

            let h = Math.floor(verschil / 60);
            let m = verschil % 60;
            document.getElementById('totaalTijd').innerText = h + "u " + m + "m";
        }

        function verstuurMail() {
            let tekst = "Ritgegevens Rit #5835%0A%0A";
            locaties.forEach((loc, index) => {
                let tijd = document.getElementById(`tijd-${index}`).innerText;
                let km = document.getElementById(`km-${index}`).value || "---";
                tekst += `${loc}: ${tijd} | KM: ${km}%0A`;
            });
            
            tekst += "%0A" + "TOTALE DIENSTTIJD: " + document.getElementById('totaalTijd').innerText;
            tekst += "%0A" + "TOTALE AFSTAND: " + document.getElementById('totaalKm').innerText;
            
            window.location.href = "mailto:info@taxiberkhout.nl?subject=Ritregistratie Hilbert&body=" + tekst;
        }

        initApp();
    </script>
</body>
</html>
